if (self.CavalryLogger) { CavalryLogger.start_js(["SaVSi"]); }

__d("ArtilleryComponentSaverOptionsStatic",[],(function(a,b,c,d,e,f){e.exports={options:{ads_wait_time_saver:{shouldCompress:!1,shouldUploadSeparately:!1},ads_flux_profiler_saver:{shouldCompress:!0,shouldUploadSeparately:!1},comet_dev_tools_web_loom_saver:{shouldCompress:!0,shouldUploadSeparately:!1},timeslice_execution_saver:{shouldCompress:!0,shouldUploadSeparately:!1},interaction_async_request_join_data:{shouldCompress:!0,shouldUploadSeparately:!0},resources_saver:{shouldCompress:!0,shouldUploadSeparately:!1}}}}),null);
__d("ExpiringLockable",["EventEmitter","clearTimeout","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$ExpiringLockable1=0,b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.addUnlockListener=function(a,b){this.once("unlock",a,b)};d.$ExpiringLockable2=function(){var a=this;this.$ExpiringLockable1+=1;var b=!1;return function(){if(b)return;b=!0;a.$ExpiringLockable1-=1;a.$ExpiringLockable1===0&&a.emit("unlock")}};d.getLock=function(){return{unlock:this.$ExpiringLockable2()}};d.getLockWithTimeout=function(a){var c=this.$ExpiringLockable2(),d,e=function(){d!=null&&(b("clearTimeout")(d),d=null),c()};d=b("setTimeoutAcrossTransitions")(function(){return e()},a);return{unlock:e}};d.destroy=function(){this.removeAllListeners("unlock")};return c}(b("EventEmitter"));e.exports=a}),null);
__d("ArtilleryProfilingHandleManager",["ExpiringLockable"],(function(a,b,c,d,e,f){"use strict";var g=new(b("ExpiringLockable"))();a={reset:function(){g.destroy(),g=new(b("ExpiringLockable"))()},subscribeToAllHandlesClosed:function(a){g.addUnlockListener(a)},getProfilingHandle:function(a,b){b===void 0&&(b=6e4);a=g.getLockWithTimeout(b);return{finish:a.unlock}}};e.exports=a}),null);
__d("ArtillerySWDataCollector",["Promise","ArtillerySWConfig","ClientServiceWorkerMessage","ServiceWorkerRegistration","pageLoadedViaSWCache","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){var g=5e3,h=null;function i(a){var c=!1,d=new(b("ClientServiceWorkerMessage"))("asw-pageTraceDataRequest",{fullSWEFLog:b("ArtillerySWConfig").shouldLogEFRsrcs},function(b){b=b.data;var d=b.command;b=b.data;if(c)return;c=!0;if(d==="trace"&&b.workerPerf){var e;b.workerPerf.annotations.stringProps&&b.workerPerf.annotations.stringProps.fullCacheHitData&&(e=b.workerPerf.annotations.stringProps.fullCacheHitData,delete b.workerPerf.annotations.stringProps.fullCacheHitData);a({workerPerf:b.workerPerf,fullCacheHitData:e});return}});d.sendViaController()}a={collect:function(){if(h!==null)return h;h=new(b("Promise"))(function(a,c){b("pageLoadedViaSWCache")()||b("ServiceWorkerRegistration").isAWorkerActivated().then(function(c){if(c)b("setTimeoutAcrossTransitions")(function(){a()},g);else{a();return}})["catch"](a),i(a)});return h}};e.exports=a}),null);
__d("BrowserProfiler",[],(function(a,b,c,d,e,f){a={isEnabled:function(){return this.isAvailable()},isAvailable:function(){return!!window.facebookLowLevelProfiler},getProfile:function(a){window.facebookLowLevelProfiler.getData(function(b){a(b)})},notifyTracePosted:function(a,b){window.facebookLowLevelProfiler.notifyTracePosted(a,b)}};e.exports=a}),null);
__d("ResourceTimingPageletImageHelper",["ImageTimingHelper"],(function(a,b,c,d,e,f){"use strict";a={getPageletImageMap:function(a,c){a=a?b("ImageTimingHelper").getImageTimings(c).sort(function(a,b){return a.ts-b.ts}).reduce(function(a,b){if(a[b.uri])return a;a[b.uri]=b.pagelet;return a},{}):{};return a}};e.exports=a}),null);
__d("sourceMetaToString",[],(function(a,b,c,d,e,f){function a(a,b){var c;a.name?(c=a.name,a.module&&(c=a.module+"."+c)):a.module&&(c=a.module+".<anonymous>");b&&a.line&&(c=(c?c:"<anonymous>")+":"+a.line,a.column&&(c+=":"+a.column));return c}e.exports=a}),null);
__d("TimeSliceHelper",["LogBuffer","ProfilingCounters","ProfilingCountersStore","sourceMetaToString"],(function(a,b,c,d,e,f){var g,h,i=function(a,b){return Math.round((a-b)*1e3)},j={counterFunction:function(a){return(g||(g=b("ProfilingCountersStore"))).getNestedTotals(a)}};function k(a,c,d,e){c=c.counterFunction;if(d.guard){var f=b("sourceMetaToString")(d),g=d.guard.toString();f=f?g+" at "+f:g}else f=d.desc;g=e!=null?c(e):null;c={begin:d.begin,end:d.end,name:f,id:d.id,counters:g,isEdgeContinuation:d.isEdgeContinuation};d.parentID&&d.parentID!==d.id&&(c.parentID=d.parentID);a.push(c)}function l(a,c,d){c=c.counterFunction;c={begin:d.begin,end:d.end,name:"JS["+d.count+"]",counters:c(b("ProfilingCounters").wrapInSingleContext(d.contextsToBeMerged))};a.push(c)}function m(a,b){var c=b.indirectParentID,d=b.id;b=b.isEdgeContinuation;if(c!=null){var e=a.get(c);b=b;e!=null?e={indirectParentID:e.indirectParentID,isEdgeContinuation:b&&e.isEdgeContinuation}:e={indirectParentID:c,isEdgeContinuation:b};a.set(d,e)}}function n(a,b){var c=b.indirectParentID,d=b.isEdgeContinuation,e=b.id;if(c!=null&&c!==e){e=a.get(c);e!=null&&(c=e.indirectParentID,d=e.isEdgeContinuation&&d);return babelHelpers["extends"]({},b,{parentID:c,isEdgeContinuation:d})}return b}a={formatMetricsForTransport:function(a){var b=[],c=[],d=[],e=new Map(),f=new Map(),g=0,h=function(a,b,c){var d;b.has(a)?d=b.get(a):(d=c.length,b.set(a,d),c.push(a));return d},j=[];a!=null&&a.forEach(function(a){var k=a.begin,l=a.end,m=a.name,n=a.id,o=a.counters,p=a.parentID;a=a.isEdgeContinuation;var q=i(k,g);k=i(l,k);g=l;l=h(m,e,b);m=[q,k,l];var r=o||{};q=Object.keys(r).filter(function(a){return r[a]!==0}).sort();if(q.length>0){k=q.join();l=h(k,f,d);o=q.map(function(a){return r[a]});o.unshift(l)}else o=[];n&&m.push(n);p&&(m.push(p),m.push(a));j.push(m);c.push(o)});return{version:"compact",items:j,names:b,counters:c,counterSchemas:d}},getMetrics:function(a,b,c,d,e,f,g){var h=function(a,b){var e=b.end-b.begin<c;b=a&&b.begin-a.end<d&&e;return{shouldMergeIntoCurrentMerge:b,shouldFlushCurrentThenNewMerge:e}};return this.getCustomMergeMetrics(a,b,h,e,f,g)},getCustomMergeMetrics:function(a,c,d,e,f,g){g==null?g=j:g=babelHelpers["extends"]({},j,g);var i=function(a){a=a.id;return a&&f[a]?f[a]:null},o=[],p=k.bind(void 0,o,g),q=l.bind(void 0,o,g);g=(h||(h=b("LogBuffer"))).read("time_slice_heartbeat");if(e.length>0){var r=Math.max.apply(null,e.map(function(a){return a.id}));g.forEach(function(a){return a.id+=r})}e=e.concat(g);var s;g=new Map();var t=m.bind(void 0,g),u=n.bind(void 0,g),v=function(){s&&(s.count>1?q(s):p(u(s.first),i(s.first))),s=null};g=e.sort(function(a,b){if(a.begin!==b.begin)return a.begin-b.begin;else if(a.end!==b.end)return a.end-b.end;else return 0}).filter(function(b){return(a==null||b.end>=a)&&(c==null||b.begin<=c)});if(g.length>0&&!g[0].representsExecution&&g[0].begin<a){e=g[0];g[0]=babelHelpers["extends"]({},e,{begin:a})}g.forEach(function(a){var b=d(s,a),c=b.shouldMergeIntoCurrentMerge;b=b.shouldFlushCurrentThenNewMerge;var e=i(a);if(s&&c)s.end=a.end,s.count++,e&&s.contextsToBeMerged.push(e),s.count===2&&t(s.first),t(a);else if(b){v();c=[];e&&c.push(e);s={begin:a.begin,end:a.end,count:1,first:a,contextsToBeMerged:c}}else b||(v(),p(u(a),e))});v();return o}};e.exports=a}),null);
__d("ArtilleryTraceIDUtils",["Alea","FBLogger","ServerNonce"],(function(a,b,c,d,e,f){var g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=b("Alea")(b("ServerNonce").ServerNonce),i=function(){var a=0,b=0,c="";for(var d=10;d>=0;d--)a<6&&(b=Math.floor(2147483648*h()),a=32),d===0&&(b&=7),c=g.charAt(b&63)+c,b>>=6,a-=6;return c};a={newTraceId:function(){var a;for(var c=3;c>0;c--){a=i();if(a!=this.getDummyId())return a}b("FBLogger")("FIXME").mustfix("failed to generate valid Fbtrace id");return this.getDummyId()},newObjectId:function(){return this.newTraceId()},getDummyId:function(){return"AAAAAAAAAAA"},traceIdToBucket:function(a){a=a.charAt(a.length-1);return g.indexOf(a)%32}};e.exports=a}),null);
__d("InteractionAsyncRequestJoinDataSource",["ArtilleryAsyncRequestTracingAnnotator","FBLogger"],(function(a,b,c,d,e,f){"use strict";a={registerInteraction:function(a){a.countDown();var c=a.traceID,d=a.name;if(c==null){b("FBLogger")("InteractionAsyncRequestJoinDataSource").mustfix("got a null trace_id for interaction "+d+". Typically this indicates that only lite tracing was on, which this hook does not support");return}var e=b("ArtilleryAsyncRequestTracingAnnotator").startTracingWindow(c,d);a.registerOnBeforeFinish(function(a){var b=e.finishTracingWindow();a.recordWithExtraSaver("interaction_async_request_join_data","entries",b)});a.registerOnCleanup(function(){e.finishTracingWindow()})}};e.exports=a}),null);
__d("TSIAdsReliabilityHook",[],(function(a,b,c,d,e,f){"use strict";var g={callbacks:[],register:function(a){g.callbacks.push(a)},event:function(a,b,c){g.callbacks.forEach(function(d){return d(a,b,c)})}};e.exports=g}),null);
__d("TimeSliceExecutionLogger",["ExecutionContextObservers","IntervalTrackingBoundedBuffer","OnDemandExecutionContextObserver","TimeSlice","TimingAnnotations","performanceAbsoluteNow"],(function(a,b,c,d,e,f){"use strict";var g,h,i=1e4,j={BEGIN:"b",END:"e"},k=new(b("TimingAnnotations"))(),l;a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$TimeSliceExecutionLogger1=new(b("IntervalTrackingBoundedBuffer"))(i),c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.onNewContextCreatedWhileEnabled=function(a,c,d){if(a)return(g||(g=b("performanceAbsoluteNow")))();else return null};d.onBeforeContextStartedWhileEnabled=function(a,b,c){c={type:j.BEGIN,ts:a.absBeginTimeMs};b!==null&&(c.creation=b);this.$TimeSliceExecutionLogger1.pushElement(c);a=l;l=null;return a};d.onAfterContextStartedWhileEnabled=function(a,b,c,d){return c};d.onAfterContextEndedWhileEnabled=function(a,b,c,d){b=a.absEndTimeMs;d={type:j.END,ts:b,name:a.name,id:a.contextID};l&&(d.annotations=l.prepareToSend());this.$TimeSliceExecutionLogger1.pushElement(d);l=c};d.annotateCurrentExecution=function(){if(!this.isEnabled())return k;l==null&&(l=new(b("TimingAnnotations"))());return l};d.getBeforeID=function(){return(h||(h=b("ExecutionContextObservers"))).beforeIDs.TIMESLICE_EXECUTION_LOGGER};d.getAfterID=function(){return(h||(h=b("ExecutionContextObservers"))).afterIDs.TIMESLICE_EXECUTION_LOGGER};d.getBuffer=function(){return this.$TimeSliceExecutionLogger1};return c}(b("OnDemandExecutionContextObserver"));c=new a();b("TimeSlice").registerExecutionContextObserver(c);e.exports=c}),null);
__d("TimeSliceExecutionDataSource",["TimeSliceExecutionLogger","performanceAbsoluteNow"],(function(a,b,c,d,e,f){"use strict";var g;a={registerInteraction:function(a){a.countDown();var c=(g||(g=b("performanceAbsoluteNow")))(),d=b("TimeSliceExecutionLogger").getBuffer().open(),e=b("TimeSliceExecutionLogger").expressInterest();a.registerOnBeforeFinish(function(a){e();var b=d.close(),f=d.hasOverflown();a.recordWithExtraSaver("timeslice_execution_saver","entries",{startTime:c,entries:b,hasOverflown:f})});a.registerOnCleanup(function(){e(),d.close()})}};e.exports=a}),null);
__d("TimeSliceInteractionBootloadForPost",["Bootloader"],(function(a,b,c,d,e,f){"use strict";function a(a){b("Bootloader").loadModules(["Banzai","BanzaiStream","BanzaiODS","ResourceTimingBootloaderHelper","TimeSliceHelper","SnappyCompressUtil","PerfXSharedFields"],a,"TimeSliceInteractionBootloadForPost")}e.exports=a}),null);
__d("TimeSliceInteractionReliability",["ifRequired"],(function(a,b,c,d,e,f){"use strict";var g="timeslice_interactions",h=!0,i=new Map();function j(a,b,c){return b+":"+c+":"+a}function a(a,c,d){a=j(a,c,d);var f=b("ifRequired")("BanzaiODS",function(a){return a});if(!f){c=i.get(a)||0;i.set(a,c+1)}else h&&(i.forEach(function(a,b){return f.bumpEntityKey(2966,g,b,a)}),h=!1),f.bumpEntityKey(2966,g,a,1)}e.exports={bumpLifecycleCounter:a}}),null);
__d("TimeSliceInteraction",["ArtilleryComponentSaverOptionsStatic","ArtilleryTraceIDUtils","Bootloader","CircularBuffer","ErrorGuard","ErrorPubSub","FBLogger","Heartbeat","InteractionAsyncRequestJoinDataSource","ProfilingCounters","ProfilingCountersStore","Random","ResourceTimingsStore","ResourceTypes","TimeSlice","TimeSliceExecutionDataSource","TimeSliceInteractionBootloadForPost","TimeSliceInteractionReliability","TimeSliceInteractionSV","TimingAnnotations","TSIAdsReliabilityHook","UserTimingUtils","Visibility","compactArray","performance","performanceAbsoluteNow","performanceNavigationStart","requestIdleCallbackAcrossTransitions"],(function(a,b,c,d,e,f){var g,h,i,j,k,l={pointGroup:null,type:null,isPointOfInterest:null};d=250;var m=new(b("CircularBuffer"))(d);new Map();f=100;var n=new(b("CircularBuffer"))(f),o=new Map(),p=new(b("TimingAnnotations").EmptyTimingAnnotations)(),q=new(b("TimingAnnotations").EmptyTraceTimingAnnotations)(),r="artillery_javascript_actions",s="artillery_javascript_lite_actions";function c(a){var b="visibility_state_"+a,c={isPointOfInterest:!0,pointGroup:"visibility_state_changes"};return function(){return y.informGlobally(b,c)}}if(b("Visibility")&&b("Visibility").addListener){(d=b("Visibility")).addListener(d.HIDDEN,c("hidden"));d.addListener(d.VISIBLE,c("visible"))}function t(a){if(b("Visibility")){var c=b("Visibility").isHidden()?b("Visibility").HIDDEN:b("Visibility").VISIBLE;a.inform("visibility_state_"+c,{pointGroup:"visibility_state_changes"})}}function u(a){var c=b("TimeSliceInteractionSV").interaction_to_coinflip,d=b("TimeSliceInteractionSV").interaction_to_lite_coinflip;c=Object.prototype.hasOwnProperty.call(c,a)?c[a]:b("TimeSliceInteractionSV").default_rate;d=Object.prototype.hasOwnProperty.call(d,a)?d[a]:b("TimeSliceInteractionSV").lite_default_rate;a=new Set();b("Random").coinflip(d)&&a.add("lite");b("Random").coinflip(c)&&a.add("full");var e=0;a.has("full")?e=1/c:c===0?e=0:e=1-1/c;c=0;a.has("lite")&&(c=1/d);return{modes:a,probability:e,liteProbability:c}}function v(){return o.size!==0}function w(a){return babelHelpers["extends"]({},a,{annotations:a.annotations.prepareToSend()})}function x(a,c){c=(g||(g=b("ProfilingCountersStore"))).getNestedTotalsByAttributions(c,a);a=c.attributed;c=c.unattributed;var d={};a=Object.entries(a);for(var e=0;e<a.length;e++){var f=a[e],h=f[0];f=f[1];d["internal:"+h]=f}h=Object.entries(c);for(var f=0;f<h.length;f++){a=h[f];e=a[0];c=a[1];d["external:"+e]=c}return d}var y=function(){"use strict";c.create=function(a,b,d){b===void 0&&(b=[]);d===void 0&&(d=!1);a=new c(a,b,d);a.trace().addStringAnnotation("initiatorType","manually_ended");return a};c.informGlobally=function(a,c){if(!v())return p;var d=(h||(h=b("performanceAbsoluteNow")))(),e=new(b("TimingAnnotations"))(),f=babelHelpers["extends"]({ts:d,name:a,annotations:e,rawStackTrace:c&&c.rawStackTrace||null,guardStack:b("TimeSlice").getGuardNameStack()},l,c);e.addStringAnnotation("global_point","1");o.forEach(function(a){return a.push(f)});return e};c.informOnPage=function(a,c){var d=(h||(h=b("performanceAbsoluteNow")))(),e=new(b("TimingAnnotations"))();d=babelHelpers["extends"]({ts:d,name:a,annotations:e,rawStackTrace:c&&c.rawStackTrace||null,guardStack:[]},l,c);m.write(d);return e};function c(a,c,d){var e=this;c===void 0&&(c=[]);d===void 0&&(d=!1);this.$2=null;this.$4=!0;this.$5=null;this.$6=[];this.$7=!1;this.$9=[];this.$10=[];this.$11=[];this.$12=[];this.$13=new(b("TimingAnnotations").TraceTimingAnnotations)();this.$14=new Map();this.$17=null;this.$18=1;this.$21=1;this.$25=!0;this.$26={};var f=u(a),j=f.modes,k=f.probability;f=f.liteProbability;this.$15=j;this.$1=a;this.$19=k;this.$20=f;this.$16=d?b("performanceNavigationStart")():(h||(h=b("performanceAbsoluteNow")))();this.$24=new Map();this.$8=new Set();k=this.inform("trace_started",{type:3,pointGroup:"e2e",isPointOfInterest:!0,ts:this.$16});(i||(i=b("performance")))&&(i||(i=b("performance"))).now&&k.addStringAnnotation("offset_from_start_of_req_ms",(i||(i=b("performance"))).now().toString());t(this);o.set(this,[]);this.isEnabledForMode("full")&&(b("TimeSliceInteractionSV").enable_heartbeat&&(this.$5=b("Heartbeat").get().expressInterest()),this.$3=b("ArtilleryTraceIDUtils").newTraceId());j.has("full")&&n.write({interaction:this,ts:(h||(h=b("performanceAbsoluteNow")))()});if(j.size===0)this.disable(!0);else{if(this.isEnabledForMode("full")){b("TimeSliceInteractionSV").enable_heartbeat&&(this.$5=b("Heartbeat").get().expressInterest());b("TimeSliceInteractionSV").force_async_request_tracing_on&&c.push(b("InteractionAsyncRequestJoinDataSource"));f=b("ProfilingCounters").getObserver().expressInterest();this.$11.push(f);this.$22=(g||(g=b("ProfilingCountersStore"))).getInstance().open();this.$23=b("TimeSlice").getBuffer().open();this.$11.push(function(){e.$23&&e.$23.close(),e.$22&&e.$22.close()})}var l={trace:function(){return e.trace()},countDown:function(){return e.countDown()},forceFinish:function(){return e.finish(!0)},registerOnBeforeFinish:function(a){return e.registerOnBeforeFinish(a)},registerOnCleanup:function(a){return e.registerOnCleanUp(a)},traceID:this.$3,name:a};b("TimeSliceInteractionSV").also_record_new_timeslice_format&&c.push(b("TimeSliceExecutionDataSource"));var m=b("compactArray")(c.map(function(a){e.$21++;return a.registerInteraction(l)}));this.$11.push(function(){m.forEach(function(a){return a.remove()})});this.$10.push(function(){e.trace().addStringAnnotation("wait_for_count",""+e.$21)})}for(var d=j,k=Array.isArray(d),f=0,d=k?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(k){if(f>=d.length)break;c=d[f++]}else{f=d.next();if(f.done)break;c=f.value}j=c;b("TimeSliceInteractionReliability").bumpLifecycleCounter("starting",a,j)}}var d=c.prototype;d.recordWithExtraSaver=function(a,b,c){if(this.isEnabled()){var d=this.$24.get(a)||{};b!=null&&c!=null&&(d[b]=c);this.$24.set(a,d)}return this};d.countDown=function(){this.$21--,this.$21===0?this.$17&&this.$17():this.$21<0&&b("FBLogger")("TimeSliceInteraction").warn("some hook counted down twice")};d.countUp=function(){this.$21>0?++this.$21:b("FBLogger")("TimeSliceInteraction").warn("Attempting to countUp on finished interaction")};d.inform=function(a,c){var d=c!=null&&c.isPointOfInterest;if(!this.isEnabledForMode("full")&&!(this.isEnabledForMode("lite")&&d))return p;d=c&&c.ts||(h||(h=b("performanceAbsoluteNow")))();var e=new(b("TimingAnnotations"))(),f=this.isEnabledForMode("full")?b("TimeSlice").getGuardNameStack():[];this.$9.push(babelHelpers["extends"]({ts:d,name:a,annotations:e,rawStackTrace:c&&c.rawStackTrace||null,guardStack:f},l,c));return e};d.informPointWithOverride=function(a,c){var d=(h||(h=b("performanceAbsoluteNow")))(),e=c!=null&&c.isPointOfInterest;if(!this.isEnabledForMode("full")&&!(this.isEnabledForMode("lite")&&e)||!this.$26)return p;e=this.isEnabledForMode("full")?b("TimeSlice").getGuardNameStack():[];var f=this.$26[a];c&&(c.rawStackTrace=c.rawStackTrace||null);if(f)f.ts=d,f.guardStack=e,Object.assign(f,c||{});else{f=new(b("TimingAnnotations"))();this.$26[a]=babelHelpers["extends"]({ts:d,name:a,annotations:f,rawStackTrace:c&&c.rawStackTrace||null,guardStack:e},l,c)}return this.$26[a].annotations};d.invokeWithProfiling=function(c,d){if(!this.isEnabledForMode("full"))return d();var e=this.inform("start_"+c);this.$6.push(e);e=(k||(k=b("ErrorGuard"))).applyWithGuard(d,a,[],{name:c});this.inform("finished_"+c);this.$6.pop();return e};d.getCurrentInvocation=function(){if(!this.isEnabledForMode("full"))return p;else if(this.$6.length<1)return p;else return this.$6[this.$6.length-1]};d.finish=function(a){var c=this;this.$27(a?"client_tsi_finish_on_unload":"client_tsi_finish");if(!this.$4)return;if(a&&this.$17){this.$17();return}if(this.$7)b("FBLogger")("TimeSliceInteraction").warn("Trace was already marked as ended");else{t(this);this.$12.forEach(function(a){return a(c)});for(var d=this.$15,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;b("TimeSliceInteractionReliability").bumpLifecycleCounter("finishing",this.$1,g)}this.inform("trace_ended",{type:4,pointGroup:"e2e",isPointOfInterest:!0});var i=this.isEnabledForMode("lite"),j=this.isEnabledForMode("full");j&&this.trace().addStringAnnotation("weight",""+1/(this.$18*this.$19));i&&this.trace().addStringAnnotation("lite_weight",""+1/(this.$18*this.$20));navigator&&navigator.connection&&(typeof navigator.connection.downlink==="number"&&this.trace().addStringAnnotation("browser_downlink_megabits",navigator.connection.downlink.toString()),typeof navigator.connection.rtt==="number"&&this.trace().addStringAnnotation("browser_rtt_ms",navigator.connection.rtt.toString()),typeof navigator.connection.effectiveType==="string"&&this.trace().addStringAnnotation("browser_effective_connection_type",navigator.connection.effectiveType));var k=(h||(h=b("performanceAbsoluteNow")))(),l=o.get(this);o["delete"](this);this.$5&&this.$5();var m=this.$22!=null?this.$22.close():[],n=this.$23!=null?this.$23.close():[],p=this.$23!=null?this.$23.hasOverflown():!1,q=this.$23!=null?this.$23.getOverflowSize():0;if(i||j){var r=function(){i&&c.$28(l),j&&c.$29(k,l,m,n,p,q),c.$30()};a?r():this.$17=function(){return b("requestIdleCallbackAcrossTransitions")(function(){return r()})}}this.countDown();this.$7=!0}};d.registerOnBeforeSend=function(a){this.$4&&this.$10.push(a);return this};d.registerOnBeforeFinish=function(a){this.$4&&this.$12.push(a);return this};d.registerOnCleanUp=function(a){this.$4&&this.$11.push(a);return this};d.trace=function(){return!this.$4?q:this.$13};d.getTraceID=function(){return this.$4?this.$3:null};d.setExtraSampleRate=function(a){this.$18=a;return this};d.isEnabled=function(){return this.$4};d.disable=function(a){a===void 0&&(a=!1);o["delete"](this);this.$5&&this.$5();if(!a&&this.$4)for(var a=this.$15,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;b("TimeSliceInteractionReliability").bumpLifecycleCounter("disabled",this.$1,e)}this.$4=!1;this.$30()};d.disableBanzaiStream=function(){this.$25=!1};c.getPageLoadPoints=function(a,b){var c=[],d=m.read();for(var e=d.length-1;e>=0;e--){var f=d[e];if(f.ts<a)return c;else f.ts<b&&c.push(w(f))}return c};c.getInteractionIDsBetween=function(a,b){var c=[],d=n.read();for(var e=d.length-1;e>=0;e--){var f=d[e],g=f.interaction;f=f.ts;g=g.getTraceID();if(f<a)return c;else f<b&&g!=null&&c.push(g)}return c};d.receiveAsyncResponse=function(a){a!=null&&a.artillery_info&&this.isEnabledForMode("full")?this.$31(a.artillery_info.artillery_join_points):this.disable();return this};d.addArtilleryIDHeader=function(a){this.$4&&a.setRequestHeader("X-ARTILLERY-REQ-METADATA",JSON.stringify({trace_id:this.$3}));return this};d.forResourceRequest=function(a){if(!this.isEnabledForMode("full"))return p;else{var c=this.$14.get(a);if(c)return c;else{c=new(b("TimingAnnotations"))();this.$14.set(a,c);return c}}};d.addProfilingCounterAttribution=function(a){this.$8.add(a);return this};d.$31=function(a){if(!this.isEnabledForMode("full"))return this;this.$2=a;return this};d.$28=function(a){var c=this;this.$10.forEach(function(a){return a()});this.$10=[];if(!this.isEnabled())return;var d=[];a=this.$9.concat(Object.values(this.$26)).concat(a||[]);a.forEach(function(a){a.isPointOfInterest&&d.push({ts:a.ts,name:a.name,pointGroup:a.pointGroup,annotations:a.annotations.prepareToSend()})});var e={trace_id:this.$3,action_name:this.$1,trace_annotations:this.$13.prepareToSend(),points:d};b("Bootloader").loadModules(["Banzai","BanzaiODS","PerfXSharedFields"],function(a,d,f){b("TimeSliceInteractionReliability").bumpLifecycleCounter("posting",c.$1,"lite"),a.post(s,f.addCommonValues(e),a.VITAL)},"TimeSliceInteraction")};d.$29=function(a,c,d,e,f,h){var j=this;this.$27("client_tsi_post_start");this.$10.forEach(function(a){return a()});this.$10=[];if(!this.isEnabled())return;c=c!=null?this.$9.concat(c):this.$9;c.push.apply(c,Object.values(this.$26));var k=c.map(w),l=Array.from(this.$8.keys()),m=new Map(this.$24.entries());b("TimeSliceInteractionBootloadForPost")(function(c,n,o,p,q,s,t){j.$27("client_tsi_post_ready");b("TimeSliceInteractionReliability").bumpLifecycleCounter("posting",j.$1,"full");o=q.getMetrics(j.$16,a,b("TimeSliceInteractionSV").maxBlockMergeDuration,b("TimeSliceInteractionSV").maxBlockMergeDistance,e,(g||(g=b("ProfilingCountersStore"))).toMap(d),{includeRefTreeIDs:!0,counterFunction:function(a){return x(l,a)}});j.$13.addStringAnnotation("overflown_timeslice_buffer",f?"1":"0");j.$13.addStringAnnotation("overflown_timeslice_entry_count",""+h);if((i||(i=b("performance")))&&(i||(i=b("performance"))).timing&&(i||(i=b("performance"))).timing.navigationStart){var u=e.length>0?e[0].begin:null;p=p.getMetrics(u!=null&&u<j.$16?u:j.$16,{},null,a,!0,!0);u=p.data;p=p.diagnostics;p&&(j.$13.addStringAnnotation("number_of_valid_entries",p.numValidEntries.toString()),j.$13.addStringAnnotation("number_of_success_metrics",p.numSuccessfulMetrics.toString()));Object.values(u).forEach(function(a){return a.forEach(function(a){var c=a.desc,d=a.type,e=j.$14.get(c);e=e&&e.prepareToSend();if(d===b("ResourceTypes").JS||d===b("ResourceTypes").CSS||d===b("ResourceTypes").XHR){d=b("ResourceTimingsStore").getAnnotationsFor(d,c);e=b("TimingAnnotations").combine(e,d)}a.annotations=e})})}else u={};var v={};m.forEach(function(a,c){var d=b("ArtilleryComponentSaverOptionsStatic").options[c];d=!!(d&&d.shouldCompress);if(d){d=s.compressStringToSnappy(JSON.stringify(a));if(d!=null){v[c]={data:d,isCompressed:!0};return}}v[c]={isCompressed:!1,data:a}});p={trace_id:j.$3,join_points:j.$2,action_name:j.$1,points:k,traceAnnotations:j.$13.prepareToSend(),timeslices:q.formatMetricsForTransport(o),resource_timings:u,extra_savers:v};p=t.addCommonValues(p);b("TimeSliceInteractionSV").compression_enabled&&(p=j.$32(s,p));q=b("TimeSliceInteractionSV").banzai_stream_coinflip||0;j.$25&&b("TimeSliceInteractionSV").enable_banzai_stream&&b("Random").coinflip(q)?n.post(r,p,{compress:!1}):c.post(r,p,{compress:!1})})};d.$32=function(a,b){var c=["points","timeslices","resource_timings","sampler_profile"],d={};c.forEach(function(c){var e=b[c];if(e==null)return;e=JSON.stringify(e);e=a.compressStringToSnappy(e);e!==null&&(d[c]=e,delete b[c])});return babelHelpers["extends"]({},b,{miny:d})};d.$30=function(){delete this.$9,this.$10=[],this.$11&&(this.$11.forEach(function(a){return a()}),this.$11=[]),this.$12=[],delete this.$26,delete this.$17,delete this.$24};d.isEnabledForMode=function(a){return this.$4&&!this.$7&&this.$15.has(a)};d.isDone=function(){return this.$7};d.$27=function(a){b("TSIAdsReliabilityHook").event(this.$1,a,this.getTraceID())};c.getAllActiveInteractions=function(){return o.keys()};return c}();e.exports=y}),null);
__d("getFirstPaint",["performance"],(function(a,b,c,d,e,f){"use strict";var g;function a(){var a=null;if((g||(g=b("performance")))&&(g||(g=b("performance"))).timing){var c=(g||(g=b("performance"))).timing;if(window.PerformancePaintTiming){var d=(g||(g=b("performance"))).getEntriesByType("paint");d.forEach(function(c){c.name==="first-paint"&&(a=Math.round(c.startTime+(g||(g=b("performance"))).timeOrigin))})}else if(window.chrome&&window.chrome.loadTimes){d=window.chrome.loadTimes();a=parseInt(d.firstPaintTime*1e3,10)}else typeof c.msFirstPaint==="number"&&(a=c.msFirstPaint)}return a!==null&&a!==0?a:null}e.exports=a}),null);
__d("incognito",["regeneratorRuntime","Promise","UserAgent","WebStorage","gkx"],(function(a,b,c,d,e,f){"use strict";var g;function a(){var a;return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:a=window.RequestFileSystem||window.webkitRequestFileSystem;if(!a){c.next=3;break}return c.abrupt("return",new(b("Promise"))(function(b){return a(window.TEMPORARY,10,function(){return b(!1)},function(){return b(!0)})}));case 3:if(!(b("UserAgent").isBrowser("IE >= 10")||b("UserAgent").isBrowser("Edge"))){c.next=5;break}return c.abrupt("return",!window.indexedDB);case 5:if(!b("UserAgent").isBrowser("Firefox >= 16")){c.next=7;break}return c.abrupt("return",new(b("Promise"))(function(a){var b=window.indexedDB.open("__test__");b.onsuccess=function(){return a(!1)};b.onerror=function(b){b.preventDefault(),a(!0)}}));case 7:if(!(b("gkx")("676917")&&(b("UserAgent").isPlatform("iOS")&&b("UserAgent").isBrowser("Safari >= 10.3")||b("UserAgent").isPlatform("Mac OS X")&&b("UserAgent").isBrowser("Safari >= 11.1")))){c.next=18;break}c.prev=8;window.openDatabase("sid","1.0","",0);c.next=16;break;case 12:c.prev=12;c.t0=c["catch"](8);if(!(c.t0.name==="SecurityError")){c.next=16;break}return c.abrupt("return",!0);case 16:c.next=20;break;case 18:if(!b("UserAgent").isBrowser("Safari")){c.next=20;break}return c.abrupt("return",!(g||(g=b("WebStorage"))).getLocalStorage());case 20:return c.abrupt("return",!1);case 21:case"end":return c.stop()}},null,this,[[8,12]])}e.exports=a}),null);
__d("ArtilleryLogger",["Arbiter","ArtilleryExperiments","ArtilleryOnUntilOffLogging","ArtilleryProfilingHandleManager","ArtilleryRequestDataCollection","ArtillerySWDataCollector","Banzai","BigPipe","BigPipeExperiments","BrowserProfiler","ImageTimingHelper","NavigationMetrics","NavigationTimingHelper","PageletEventsHelper","ProfilingCountersStore","ResourceTimingBootloaderHelper","ResourceTimingPageletImageHelper","SnappyCompressUtil","TimeSliceHelper","TimeSliceInteraction","VisibilityListener","forEachObject","getFirstPaint","incognito","isTruthy","pageLoadedViaSWCache","performance","performanceAbsoluteNow","promiseDone"],(function(a,b,c,d,e,f){var g,h,i,j=b("BigPipeExperiments").link_images_to_pagelets,k=(a=b("ArtilleryExperiments")).artillery_profiler_on,l=a.artillery_profiler_on,m=a.artillery_profiler_on,n=a.artillery_merge_max_distance_sec,o=a.artillery_merge_max_duration_sec,p="generation_time",q="__user_annotations",r="serviceworker",s="first_paint",t="sampler_profile",u="artillery_logger_data",v="artillery_browser_perf_data",w=new Map(),x=new Map(),y=!1,z=new Map(),A=new Map(),B,C,D,E=null;function F(){var a;return b("isTruthy")((g||(g=b("performance")))==null?void 0:(a=(g||(g=b("performance"))).timing)==null?void 0:a.navigationStart)}function G(a){w.has(a)||w.set(a,{})}function H(a){a.subscribe(b("BigPipe").Events.tti,function(a,c){a=c.ts;var d=c.lid;c=c.metrics;G(d);var e=w.get(d);e.t_bigpipe_tti=a;b("forEachObject")(c,function(a,b){e[b]=a})})}function I(a){a.subscribe(b("BigPipe").Events.displayed,function(a,c){a=c.ts;var d=c.lid;G(d);w.get(d).t_marker_all_pagelets_displayed=a;b("promiseDone")(b("ArtillerySWDataCollector").collect(),function(a){a&&A.set(d,a)})})}function J(a){a.subscribe(b("BigPipe").Events.loaded,function(a,b){a=b.ts;b=b.lid;G(b);w.get(b).t_marker_bigpipe_e2e=a})}function K(a,c){if(!a)return;if(c.profile){var d=b("SnappyCompressUtil").compressStringToSnappy(c.profile);d!==null&&(c.profile=d,c.snappy=!0)}d={clientData:a,browserPerfData:c,traceType:"pageload"};b("Banzai").post(v,d,b("Banzai").VITAL);b("BrowserProfiler").notifyTracePosted(d.clientData.traceID,d.traceType)}function L(a,c,d){var e=d;if(b("BrowserProfiler").isEnabled()&&x.has(e)){var f=x.get(e);window.requestIdleCallback(function(){b("BrowserProfiler").getProfile(function(a){K(f,a)})})}M(a,c,d)}function M(a,c,d){var e=(h||(h=b("performanceAbsoluteNow")))(),f=d,m=w.get(f),t=x.get(f);if(!t||!m)return;m.uploadType="full_upload";V(m);W(m,f);Q();var u=h(),v=null;switch(a){case"normal":v=0;m.navigation_timing=b("NavigationTimingHelper").getNavTimings();break;case"quickling":case"ajax":if((g||(g=b("performance"))).getEntriesByName){var y=(g||(g=b("performance"))).getEntriesByName(c);m.navigation_timing=b("NavigationTimingHelper").getAsyncRequestTimings(c);y.length&&(v=y[0].startTime)}break}c=N(a,d);y=c.profilingCountersData;d=c.timeSliceData;if(v!=null&&F()){c=v+(g||(g=b("performance"))).timing.navigationStart;v=b("ResourceTimingPageletImageHelper").getPageletImageMap(j,f);m.resource_timing_bootloader=b("ResourceTimingBootloaderHelper").getMetrics(c,v,f,null,!0).data;v=b("TimeSliceHelper").getMetrics(c,m.t_onload,o,n,d,(i||(i=b("ProfilingCountersStore"))).toMap(y));l?m.time_slice=b("TimeSliceHelper").formatMetricsForTransport(v):m.time_slice=v;m.extra_points=b("TimeSliceInteraction").getPageLoadPoints(c,u);m.interaction_ids=b("TimeSliceInteraction").getInteractionIDsBetween(c,u)}m.pagelet_events=b("PageletEventsHelper").getMetrics(f);!k&&m.pagelet_events&&(m.pagelet_events.display_resources&&delete m.pagelet_events.display_resources,m.pagelet_events.all_resources&&delete m.pagelet_events.all_resources);m.t_pagelet_start_early_resources&&m.t_pagelet_cssload_early_resources&&m.pagelet_events&&m.pagelet_events.pagelets&&(m.pagelet_events.pagelets.early_resources={css:m.t_pagelet_start_early_resources,css_load:m.t_pagelet_cssload_early_resources});Y(f);X(m,f);var B=babelHelpers["extends"]({},m,t.data,{policies:Array.from(t.policies)});d=A.get(f);a==="normal"&&d!=null&&(B[r]=d.workerPerf);a==="normal"&&(B[s]=b("getFirstPaint")());z.size&&(B[q]={},z.forEach(function(a,b){B[q][b]=a}));x["delete"](f);w["delete"](f);B[p]=h()-e;O(B)}function N(a,c){switch(a){case"normal":case"quickling":return b("ArtilleryOnUntilOffLogging").finish();case"ajax":return b("ArtilleryRequestDataCollection").finish(c)}return{profilingCountersData:[],timeSliceData:[]}}function O(a,c){c!=null&&(a[t]=c);c=(h||(h=b("performanceAbsoluteNow")))();P(a);a[p]+=h()-c;b("Banzai").post(u,a,b("Banzai").VITAL)}function P(a){var c={};if(m){var d=["resource_timing_bootloader","pagelet_events"];d.forEach(function(d){var e=a[d];if(e==null)return;e=JSON.stringify(e);e=b("SnappyCompressUtil").compressStringToSnappy(e);e!==null&&(c[d]=e,delete a[d])})}Array.from(Object.keys(c)).length>0&&(a.miny=c)}function Q(){Z.recordUserAnnotation("is_incognito",D!=null?D.toString():"unknown");var a=navigator&&navigator.hardwareConcurrency;Z.recordUserAnnotation("num_cores",a!=null?a.toString():"unknown");navigator&&navigator.deviceMemory&&typeof navigator.deviceMemory==="number"&&Z.recordUserAnnotation("ram_gb",navigator.deviceMemory.toString());navigator&&navigator.connection&&(typeof navigator.connection.downlink==="number"&&Z.recordUserAnnotation("browser_downlink_megabits",navigator.connection.downlink.toString()),typeof navigator.connection.rtt==="number"&&Z.recordUserAnnotation("browser_rtt_ms",navigator.connection.rtt.toString()),typeof navigator.connection.effectiveType==="string"&&Z.recordUserAnnotation("browser_effective_connection_type",navigator.connection.effectiveType));Z.recordUserAnnotation("client_pixel_ratio_10x",((window.devicePixelRatio||1)*10).toString());Z.recordUserAnnotation("is_sw_page_loaded_via_cache",b("pageLoadedViaSWCache")()?"1":"0");(g||(g=b("performance")))&&(g||(g=b("performance"))).navigation&&Z.recordUserAnnotation("nav_type",R((g||(g=b("performance"))).navigation.type));try{a=b("VisibilityListener").getHiddenTime(0,Infinity);a&&Z.recordUserAnnotation("is_tab_hidden",a>0?"1":"0")}catch(a){}}function R(a){switch(a){case 0:return"TYPE_NAVIGATE";case 1:return"TYPE_RELOAD";case 2:return"TYPE_BACK_FORWARD";case 255:return"TYPE_RESERVED";default:return"unknown navigation type"}}function S(){if(E==null)return;var a=E,b=a.pageType,c=a.pageURI;a=a.serverLID;L(b,c,a)}function T(a){a=a.serverLID;return x.has(a)&&w.has(a)}function U(){var a=function(a,b){T(b)&&(E=b,B!=null&&(B.finish(),B=null))};b("NavigationMetrics").addRetroactiveListener(b("NavigationMetrics").Events.NAVIGATION_DONE,a)}function V(a){if(!E)return;!a.t_bigpipe_tti&&E.tti&&(a.t_bigpipe_tti=E.tti);!a.t_tti&&E.tti&&(a.t_tti=E.tti);!a.t_marker_bigpipe_e2e&&E.e2e&&(a.t_marker_bigpipe_e2e=E.e2e);!a.t_onload&&E.e2e&&(a.t_onload=E.e2e)}function W(a,b){if(window.CavalryLogger){var c=window.CavalryLogger.getInstance(b);b=["t_domcontent","t_pagelet_start_early_resources","t_pagelet_cssload_early_resources","t_tti","t_onload"];b.forEach(function(b){Object.prototype.hasOwnProperty.call(c.values,b)?a[b]=c.values[b]:window[b]!=void 0&&(a[b]=window[b])})}}function X(a,c){if(window.CavalryLogger){c=window.CavalryLogger.getInstance(c);b("ResourceTimingBootloaderHelper").mergeBootloaderMetricsAndResourceTimings(a.resource_timing_bootloader,c.bootloader_metrics,!0)}}function Y(a){var c=w.get(a);if(F()){var d=(g||(g=b("performance"))).timing.navigationStart,e=c.t_bigpipe_tti,f=c.t_marker_bigpipe_e2e;a=b("ImageTimingHelper").getImageTimings(a);e=b("ResourceTimingBootloaderHelper").getLastTTIAndE2EImageResponseEnds(e,f,a);f=e.TTI;a=e.E2E;!isNaN(f)&&f!==d&&(c.t_tti_with_images=f);!isNaN(a)&&a!==d&&(c.t_marker_bigpipe_e2e_with_images=a)}}var Z={enableProfilingWithClientData:function(a,c,d,e){G(a);x.set(a,{traceID:c,data:d,policies:e});(B!=null||C!=null)&&(b("ArtilleryProfilingHandleManager").reset(),B=null,C=null);B=b("ArtilleryProfilingHandleManager").getProfilingHandle(b("NavigationMetrics").Events.NAVIGATION_DONE,300*1e3);C=b("ArtilleryProfilingHandleManager").getProfilingHandle("IncognitoHandle");b("promiseDone")(b("incognito")(),function(a){D=a,C!=null&&(C.finish(),C=null)});b("ArtilleryProfilingHandleManager").subscribeToAllHandlesClosed(S);if(y)return;y=!0;b("PageletEventsHelper").init();b("Arbiter").subscribe(b("BigPipe").Events.init,function(a,b){a=b.arbiter;a&&(H(a),I(a),J(a))});U()},recordUserAnnotation:function(a,b,c){c===void 0&&(c=!0);if(!c&&z.has(a))return!1;z.set(a,b);return!0}};e.exports=Z}),null);